(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,13826,87316,84614,37727,40539,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(22016),s=e.i(18566),n=e.i(83375),l=e.i(75254);let i=(0,l.default)("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);var o=e.i(61911),d=e.i(78583);let c=(0,l.default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>c],87316);let u=(0,l.default)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);var m=e.i(46897);let h=(0,l.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);e.s(["User",()=>h],84614);let x=(0,l.default)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),p=(0,l.default)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),f=(0,l.default)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>f],37727);let g=(0,l.default)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),y=(0,l.default)("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);var b=e.i(12426);let j=(0,l.default)("ChartNoAxesColumn",[["line",{x1:"18",x2:"18",y1:"20",y2:"10",key:"1xfpm4"}],["line",{x1:"12",x2:"12",y1:"20",y2:"4",key:"be30l9"}],["line",{x1:"6",x2:"6",y1:"20",y2:"14",key:"1r4le6"}]]);function v(){let e=(0,s.usePathname)(),l=(0,s.useRouter)(),{user:v,role:k,signOut:N}=(0,n.useAuth)(),[w,P]=(0,a.useState)(!1),[C,M]=(0,a.useState)(null),E=async()=>{await N(),l.push("/login")};if(!v)return null;let L=t=>e===t||e.startsWith(t+"/");return(0,t.jsxs)("nav",{className:"bg-white shadow-sm sticky top-0 z-50",children:[(0,t.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,t.jsxs)("div",{className:"flex justify-between h-16",children:[(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)(r.default,{href:"/dashboard",className:"flex-shrink-0 flex items-center",children:(0,t.jsx)("span",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-600 to-teal-500",children:"HCF E-System"})}),(0,t.jsxs)("div",{className:"hidden md:ml-8 md:flex md:space-x-4",children:[(0,t.jsxs)(r.default,{href:"/dashboard",className:`inline-flex items-center px-3 py-2 text-sm font-medium border-b-2 transition-colors ${L("/dashboard")?"border-emerald-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[(0,t.jsx)(i,{className:"w-4 h-4 mr-1.5"})," Dashboard"]}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsxs)("button",{className:`inline-flex items-center px-3 py-2 text-sm font-medium border-b-2 transition-colors ${L("/kehadiran")?"border-emerald-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[(0,t.jsx)(c,{className:"w-4 h-4 mr-1.5"})," Kehadiran ",(0,t.jsx)(g,{className:"w-3 h-3 ml-1"})]}),(0,t.jsx)("div",{className:"absolute left-0 mt-0 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none hidden group-hover:block transition-all transform origin-top-left",children:(0,t.jsx)("div",{className:"py-1",children:(0,t.jsxs)(r.default,{href:"/kehadiran",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[(0,t.jsx)(c,{className:"w-4 h-4 mr-2"})," Rekod Kehadiran"]})})})]}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsxs)("button",{className:"inline-flex items-center px-3 py-2 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300",children:[(0,t.jsx)(o.Users,{className:"w-4 h-4 mr-1.5"})," Data Mualaf ",(0,t.jsx)(g,{className:"w-3 h-3 ml-1"})]}),(0,t.jsx)("div",{className:"absolute left-0 mt-0 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none hidden group-hover:block transition-all transform origin-top-left",children:(0,t.jsxs)("div",{className:"py-1",children:[(0,t.jsxs)(r.default,{href:"/mualaf/dashboard",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[(0,t.jsx)(j,{className:"w-4 h-4 mr-2"})," Analisis & Laporan"]}),(0,t.jsxs)(r.default,{href:"/senarai",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[(0,t.jsx)(y,{className:"w-4 h-4 mr-2"})," Senarai Rekod"]}),(0,t.jsxs)(r.default,{href:"/borang",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[(0,t.jsx)(d.FileText,{className:"w-4 h-4 mr-2"})," Borang Baru"]})]})})]}),(0,t.jsxs)("div",{className:"relative group",children:[(0,t.jsxs)("button",{className:"inline-flex items-center px-3 py-2 text-sm font-medium border-b-2 border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300",children:[(0,t.jsx)(u,{className:"w-4 h-4 mr-1.5"})," Pengurusan ",(0,t.jsx)(g,{className:"w-3 h-3 ml-1"})]}),(0,t.jsx)("div",{className:"absolute left-0 mt-0 w-48 rounded-md shadow-lg bg-white ring-1 ring-black ring-opacity-5 focus:outline-none hidden group-hover:block transition-all transform origin-top-left",children:(0,t.jsxs)("div",{className:"py-1",children:[(0,t.jsxs)(r.default,{href:"/kelas",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[(0,t.jsx)(m.MapPin,{className:"w-4 h-4 mr-2"})," Kelas & Lokasi"]}),(0,t.jsxs)(r.default,{href:"/pekerja",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[(0,t.jsx)(o.Users,{className:"w-4 h-4 mr-2"})," Petugas & Guru"]}),"admin"===k&&(0,t.jsxs)(r.default,{href:"/kadar-elaun",className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100 flex items-center",children:[(0,t.jsx)(b.DollarSign,{className:"w-4 h-4 mr-2"})," Kadar Elaun"]})]})})]}),"admin"===k&&(0,t.jsxs)(r.default,{href:"/pengguna",className:`inline-flex items-center px-3 py-2 text-sm font-medium border-b-2 transition-colors ${L("/pengguna")?"border-emerald-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[(0,t.jsx)(h,{className:"w-4 h-4 mr-1.5"})," Pengguna"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsxs)("div",{className:"hidden md:flex items-center ml-4 space-x-4",children:[(0,t.jsxs)("div",{className:"flex flex-col items-end mr-2",children:[(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:v?.email}),(0,t.jsx)("span",{className:"text-xs text-gray-500 bg-gray-100 px-2 py-0.5 rounded-full border",children:"admin"===k?"Admin":"Editor"})]}),(0,t.jsx)("button",{onClick:E,className:"text-gray-400 hover:text-red-500 transition-colors",title:"Sign Out",children:(0,t.jsx)(x,{className:"w-5 h-5"})})]}),(0,t.jsx)("div",{className:"flex items-center md:hidden",children:(0,t.jsx)("button",{onClick:()=>P(!w),className:"inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none",children:w?(0,t.jsx)(f,{className:"block h-6 w-6"}):(0,t.jsx)(p,{className:"block h-6 w-6"})})})]})]})}),w&&(0,t.jsx)("div",{className:"md:hidden bg-white border-t",children:(0,t.jsxs)("div",{className:"pt-2 pb-3 space-y-1",children:[(0,t.jsxs)("div",{className:"pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-500",children:[v?.email," ",(0,t.jsx)("span",{className:"text-xs bg-gray-100 px-2 py-0.5 rounded-full ml-2",children:k})]}),(0,t.jsx)(r.default,{href:"/dashboard",className:"block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 hover:bg-gray-50 hover:border-emerald-500 hover:text-gray-800",onClick:()=>P(!1),children:"Dashboard"}),(0,t.jsx)("div",{className:"pl-3 pr-4 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Kehadiran"}),(0,t.jsx)(r.default,{href:"/kehadiran",className:"block pl-6 py-2 text-sm text-gray-600 hover:bg-gray-50",onClick:()=>P(!1),children:"Rekod Kehadiran"}),(0,t.jsx)("div",{className:"pl-3 pr-4 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Data Mualaf"}),(0,t.jsx)(r.default,{href:"/mualaf/dashboard",className:"block pl-6 py-2 text-sm text-gray-600 hover:bg-gray-50",onClick:()=>P(!1),children:"Analisis & Laporan"}),(0,t.jsx)(r.default,{href:"/senarai",className:"block pl-6 py-2 text-sm text-gray-600 hover:bg-gray-50",onClick:()=>P(!1),children:"Senarai Rekod"}),(0,t.jsx)(r.default,{href:"/borang",className:"block pl-6 py-2 text-sm text-gray-600 hover:bg-gray-50",onClick:()=>P(!1),children:"Borang Baru"}),(0,t.jsx)("div",{className:"pl-3 pr-4 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Pengurusan"}),(0,t.jsx)(r.default,{href:"/kelas",className:"block pl-6 py-2 text-sm text-gray-600 hover:bg-gray-50",onClick:()=>P(!1),children:"Kelas & Lokasi"}),(0,t.jsx)(r.default,{href:"/pekerja",className:"block pl-6 py-2 text-sm text-gray-600 hover:bg-gray-50",onClick:()=>P(!1),children:"Petugas & Guru"}),"admin"===k&&(0,t.jsx)(r.default,{href:"/kadar-elaun",className:"block pl-6 py-2 text-sm text-gray-600 hover:bg-gray-50",onClick:()=>P(!1),children:"Kadar Elaun"}),"admin"===k&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"pl-3 pr-4 py-2 text-xs font-semibold text-gray-400 uppercase tracking-wider",children:"Admin"}),(0,t.jsx)(r.default,{href:"/pengguna",className:"block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-gray-600 hover:bg-gray-50 hover:border-indigo-500 hover:text-gray-800",onClick:()=>P(!1),children:"Pengguna Sistem"})]}),(0,t.jsx)("button",{onClick:E,className:"w-full text-left block pl-3 pr-4 py-2 border-l-4 border-transparent text-base font-medium text-red-600 hover:bg-gray-50 hover:border-red-500",children:"Log Keluar"})]})})]})}e.s(["BarChart2",()=>j],40539),e.s(["default",()=>v],13826)},75460,e=>{"use strict";var t=e.i(43476),a=e.i(83375),r=e.i(18566),s=e.i(71645);function n({children:e,adminOnly:n=!1}){let{user:l,role:i,loading:o}=(0,a.useAuth)(),d=(0,r.useRouter)();return((0,s.useEffect)(()=>{!o&&(l?n&&"admin"!==i&&d.push("/dashboard"):d.push("/login"))},[l,i,o,n,d]),o)?(0,t.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-emerald-50 to-teal-50",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-emerald-600 mx-auto mb-4"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Memuatkan..."})]})}):!l||n&&"admin"!==i?null:e}e.s(["default",()=>n])},18566,(e,t,a)=>{t.exports=e.r(76562)},33525,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"warnOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},75254,e=>{"use strict";var t=e.i(71645);let a=(...e)=>e.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim();var r={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let s=(0,t.forwardRef)(({color:e="currentColor",size:s=24,strokeWidth:n=2,absoluteStrokeWidth:l,className:i="",children:o,iconNode:d,...c},u)=>(0,t.createElement)("svg",{ref:u,...r,width:s,height:s,stroke:e,strokeWidth:l?24*Number(n)/Number(s):n,className:a("lucide",i),...c},[...d.map(([e,a])=>(0,t.createElement)(e,a)),...Array.isArray(o)?o:[o]])),n=(e,r)=>{let n=(0,t.forwardRef)(({className:n,...l},i)=>(0,t.createElement)(s,{ref:i,iconNode:r,className:a(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,n),...l}));return n.displayName=`${e}`,n};e.s(["default",()=>n],75254)},98183,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={assign:function(){return o},searchParamsToUrlQuery:function(){return n},urlQueryToSearchParams:function(){return i}};for(var s in r)Object.defineProperty(a,s,{enumerable:!0,get:r[s]});function n(e){let t={};for(let[a,r]of e.entries()){let e=t[a];void 0===e?t[a]=r:Array.isArray(e)?e.push(r):t[a]=[e,r]}return t}function l(e){return"string"==typeof e?e:("number"!=typeof e||isNaN(e))&&"boolean"!=typeof e?"":String(e)}function i(e){let t=new URLSearchParams;for(let[a,r]of Object.entries(e))if(Array.isArray(r))for(let e of r)t.append(a,l(e));else t.set(a,l(r));return t}function o(e,...t){for(let a of t){for(let t of a.keys())e.delete(t);for(let[t,r]of a.entries())e.append(t,r)}return e}},95057,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={formatUrl:function(){return i},formatWithValidation:function(){return d},urlObjectKeys:function(){return o}};for(var s in r)Object.defineProperty(a,s,{enumerable:!0,get:r[s]});let n=e.r(90809)._(e.r(98183)),l=/https?|ftp|gopher|file/;function i(e){let{auth:t,hostname:a}=e,r=e.protocol||"",s=e.pathname||"",i=e.hash||"",o=e.query||"",d=!1;t=t?encodeURIComponent(t).replace(/%3A/i,":")+"@":"",e.host?d=t+e.host:a&&(d=t+(~a.indexOf(":")?`[${a}]`:a),e.port&&(d+=":"+e.port)),o&&"object"==typeof o&&(o=String(n.urlQueryToSearchParams(o)));let c=e.search||o&&`?${o}`||"";return r&&!r.endsWith(":")&&(r+=":"),e.slashes||(!r||l.test(r))&&!1!==d?(d="//"+(d||""),s&&"/"!==s[0]&&(s="/"+s)):d||(d=""),i&&"#"!==i[0]&&(i="#"+i),c&&"?"!==c[0]&&(c="?"+c),s=s.replace(/[?#]/g,encodeURIComponent),c=c.replace("#","%23"),`${r}${d}${s}${c}${i}`}let o=["auth","hash","host","hostname","href","path","pathname","port","protocol","query","search","slashes"];function d(e){return i(e)}},18581,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"useMergedRef",{enumerable:!0,get:function(){return s}});let r=e.r(71645);function s(e,t){let a=(0,r.useRef)(null),s=(0,r.useRef)(null);return(0,r.useCallback)(r=>{if(null===r){let e=a.current;e&&(a.current=null,e());let t=s.current;t&&(s.current=null,t())}else e&&(a.current=n(e,r)),t&&(s.current=n(t,r))},[e,t])}function n(e,t){if("function"!=typeof e)return e.current=t,()=>{e.current=null};{let a=e(t);return"function"==typeof a?a:()=>e(null)}}("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},18967,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={DecodeError:function(){return g},MiddlewareNotFoundError:function(){return v},MissingStaticPage:function(){return j},NormalizeError:function(){return y},PageNotFoundError:function(){return b},SP:function(){return p},ST:function(){return f},WEB_VITALS:function(){return n},execOnce:function(){return l},getDisplayName:function(){return u},getLocationOrigin:function(){return d},getURL:function(){return c},isAbsoluteUrl:function(){return o},isResSent:function(){return m},loadGetInitialProps:function(){return x},normalizeRepeatedSlashes:function(){return h},stringifyError:function(){return k}};for(var s in r)Object.defineProperty(a,s,{enumerable:!0,get:r[s]});let n=["CLS","FCP","FID","INP","LCP","TTFB"];function l(e){let t,a=!1;return(...r)=>(a||(a=!0,t=e(...r)),t)}let i=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,o=e=>i.test(e);function d(){let{protocol:e,hostname:t,port:a}=window.location;return`${e}//${t}${a?":"+a:""}`}function c(){let{href:e}=window.location,t=d();return e.substring(t.length)}function u(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function m(e){return e.finished||e.headersSent}function h(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function x(e,t){let a=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await x(t.Component,t.ctx)}:{};let r=await e.getInitialProps(t);if(a&&m(a))return r;if(!r)throw Object.defineProperty(Error(`"${u(e)}.getInitialProps()" should resolve to an object. But found "${r}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return r}let p="u">typeof performance,f=p&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class g extends Error{}class y extends Error{}class b extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class j extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class v extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function k(e){return JSON.stringify({message:e.message,stack:e.stack})}},73668,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"isLocalURL",{enumerable:!0,get:function(){return n}});let r=e.r(18967),s=e.r(52817);function n(e){if(!(0,r.isAbsoluteUrl)(e))return!0;try{let t=(0,r.getLocationOrigin)(),a=new URL(e,t);return a.origin===t&&(0,s.hasBasePath)(a.pathname)}catch(e){return!1}}},84508,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"errorOnce",{enumerable:!0,get:function(){return r}});let r=e=>{}},22016,(e,t,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r={default:function(){return g},useLinkStatus:function(){return b}};for(var s in r)Object.defineProperty(a,s,{enumerable:!0,get:r[s]});let n=e.r(90809),l=e.r(43476),i=n._(e.r(71645)),o=e.r(95057),d=e.r(8372),c=e.r(18581),u=e.r(18967),m=e.r(5550);e.r(33525);let h=e.r(91949),x=e.r(73668),p=e.r(9396);function f(e){return"string"==typeof e?e:(0,o.formatUrl)(e)}function g(t){var a;let r,s,n,[o,g]=(0,i.useOptimistic)(h.IDLE_LINK_STATUS),b=(0,i.useRef)(null),{href:j,as:v,children:k,prefetch:N=null,passHref:w,replace:P,shallow:C,scroll:M,onClick:E,onMouseEnter:L,onTouchStart:S,legacyBehavior:A=!1,onNavigate:T,ref:O,unstable_dynamicOnHover:_,...R}=t;r=k,A&&("string"==typeof r||"number"==typeof r)&&(r=(0,l.jsx)("a",{children:r}));let D=i.default.useContext(d.AppRouterContext),U=!1!==N,$=!1!==N?null===(a=N)||"auto"===a?p.FetchStrategy.PPR:p.FetchStrategy.Full:p.FetchStrategy.PPR,{href:z,as:K}=i.default.useMemo(()=>{let e=f(j);return{href:e,as:v?f(v):e}},[j,v]);if(A){if(r?.$$typeof===Symbol.for("react.lazy"))throw Object.defineProperty(Error("`<Link legacyBehavior>` received a direct child that is either a Server Component, or JSX that was loaded with React.lazy(). This is not supported. Either remove legacyBehavior, or make the direct child a Client Component that renders the Link's `<a>` tag."),"__NEXT_ERROR_CODE",{value:"E863",enumerable:!1,configurable:!0});s=i.default.Children.only(r)}let F=A?s&&"object"==typeof s&&s.ref:O,I=i.default.useCallback(e=>(null!==D&&(b.current=(0,h.mountLinkInstance)(e,z,D,$,U,g)),()=>{b.current&&((0,h.unmountLinkForCurrentNavigation)(b.current),b.current=null),(0,h.unmountPrefetchableInstance)(e)}),[U,z,D,$,g]),B={ref:(0,c.useMergedRef)(I,F),onClick(t){A||"function"!=typeof E||E(t),A&&s.props&&"function"==typeof s.props.onClick&&s.props.onClick(t),!D||t.defaultPrevented||function(t,a,r,s,n,l,o){if("u">typeof window){let d,{nodeName:c}=t.currentTarget;if("A"===c.toUpperCase()&&((d=t.currentTarget.getAttribute("target"))&&"_self"!==d||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey||t.nativeEvent&&2===t.nativeEvent.which)||t.currentTarget.hasAttribute("download"))return;if(!(0,x.isLocalURL)(a)){n&&(t.preventDefault(),location.replace(a));return}if(t.preventDefault(),o){let e=!1;if(o({preventDefault:()=>{e=!0}}),e)return}let{dispatchNavigateAction:u}=e.r(99781);i.default.startTransition(()=>{u(r||a,n?"replace":"push",l??!0,s.current)})}}(t,z,K,b,P,M,T)},onMouseEnter(e){A||"function"!=typeof L||L(e),A&&s.props&&"function"==typeof s.props.onMouseEnter&&s.props.onMouseEnter(e),D&&U&&(0,h.onNavigationIntent)(e.currentTarget,!0===_)},onTouchStart:function(e){A||"function"!=typeof S||S(e),A&&s.props&&"function"==typeof s.props.onTouchStart&&s.props.onTouchStart(e),D&&U&&(0,h.onNavigationIntent)(e.currentTarget,!0===_)}};return(0,u.isAbsoluteUrl)(K)?B.href=K:A&&!w&&("a"!==s.type||"href"in s.props)||(B.href=(0,m.addBasePath)(K)),n=A?i.default.cloneElement(s,B):(0,l.jsx)("a",{...R,...B,children:r}),(0,l.jsx)(y.Provider,{value:o,children:n})}e.r(84508);let y=(0,i.createContext)(h.IDLE_LINK_STATUS),b=()=>(0,i.useContext)(y);("function"==typeof a.default||"object"==typeof a.default&&null!==a.default)&&void 0===a.default.__esModule&&(Object.defineProperty(a.default,"__esModule",{value:!0}),Object.assign(a.default,a),t.exports=a.default)},61911,e=>{"use strict";let t=(0,e.i(75254).default)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);e.s(["Users",()=>t],61911)},78583,e=>{"use strict";let t=(0,e.i(75254).default)("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],78583)},46897,e=>{"use strict";let t=(0,e.i(75254).default)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>t],46897)},12426,e=>{"use strict";let t=(0,e.i(75254).default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);e.s(["DollarSign",()=>t],12426)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);e.s(["Trash2",()=>t],27612)},7233,92930,e=>{"use strict";var t=e.i(75254);let a=(0,t.default)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],7233);let r=(0,t.default)("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>r],92930)},55436,e=>{"use strict";let t=(0,e.i(75254).default)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);e.s(["Search",()=>t],55436)},76765,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(18566),s=e.i(83375);e.i(36180);var n=e.i(17875);e.i(14539);var l=e.i(85107);e.i(51718);var i=e.i(78513),o=e.i(1016),d=e.i(13826),c=e.i(75460),u=e.i(84614),m=e.i(7233),h=e.i(55436),x=e.i(92930),p=e.i(27612);let f=(0,e.i(75254).default)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);var g=e.i(37727);function y(){let{user:e,role:y}=(0,s.useAuth)();(0,r.useRouter)();let[b,j]=(0,a.useState)([]),[v,k]=(0,a.useState)([]),[N,w]=(0,a.useState)(!0),[P,C]=(0,a.useState)(""),[M,E]=(0,a.useState)(!1),[L,S]=(0,a.useState)("add"),[A,T]=(0,a.useState)(null),[O,_]=(0,a.useState)({email:"",password:"",name:"",role:"editor",assignedLocations:[]});(0,a.useEffect)(()=>{let t=async()=>{if("admin"===y)try{let e=(await (0,n.getDocs)((0,n.collection)(o.db,"users"))).docs.map(e=>({id:e.id,...e.data()}));j(e);let t=await (0,n.getDocs)((0,n.query)((0,n.collection)(o.db,"classes"))),a=[...new Set(t.docs.map(e=>e.data().lokasi).filter(e=>e))].sort();k(a)}catch(e){console.error("Error fetching data:",e)}finally{w(!1)}};e&&"admin"===y&&t()},[e,y]);let R=(e,t=null)=>{S(e),"edit"===e&&t?(T(t),_({email:t.email,password:"",name:t.name||"",role:("user"===t.role?"editor":t.role)||"editor",assignedLocations:t.assignedLocations||[]})):(T(null),_({email:"",password:"",name:"",role:"editor",assignedLocations:[]})),E(!0)},D=async e=>{e.preventDefault(),w(!0);try{if("add"===L){let e=(0,l.initializeApp)(o.firebaseConfig,"secondary"),t=(0,i.getAuth)(e);try{let a=(await (0,i.createUserWithEmailAndPassword)(t,O.email,O.password)).user.uid;await (0,n.setDoc)((0,n.doc)(o.db,"users",a),{email:O.email,name:O.name,role:O.role,assignedLocations:O.assignedLocations,createdAt:(0,n.serverTimestamp)()}),await (0,i.signOut)(t),(0,l.deleteApp)(e),j(e=>[...e,{id:a,email:O.email,name:O.name,role:O.role,assignedLocations:O.assignedLocations}]),alert("Pengguna berjaya dicipta!"),E(!1)}catch(t){console.error("Error creating auth user:",t),alert("Ralat mencipta pengguna: "+t.message),(0,l.deleteApp)(e)}}else await (0,n.updateDoc)((0,n.doc)(o.db,"users",A.id),{name:O.name,role:O.role,assignedLocations:O.assignedLocations,updatedAt:(0,n.serverTimestamp)()}),j(e=>e.map(e=>e.id===A.id?{...e,name:O.name,role:O.role,assignedLocations:O.assignedLocations}:e)),alert("Pengguna berjaya dikemaskini!"),E(!1)}catch(e){console.error("Error submitting form:",e),alert("Ralat memproses borang.")}finally{w(!1)}},U=async t=>{if(confirm(`Adakah anda pasti ingin memadam pengguna "${t.name}"?`)){if(t.id===e.uid)return void alert("Ralat: Anda tidak boleh memadam akaun anda sendiri.");if(confirm(`PERHATIAN PENTING:

Tindakan ini hanya akan memadam data pengguna dari pangkalan data aplikasi.

Sila pastikan anda juga MEMADAM akaun ini secara manual dari senarai Firebase Authentication Console untuk menyekat akses login sepenuhnya.

Adakah anda faham dan ingin meneruskan?`))try{await (0,n.deleteDoc)((0,n.doc)(o.db,"users",t.id)),j(e=>e.filter(e=>e.id!==t.id)),alert(`Pengguna berjaya dipadam.

Jangan lupa padam dari Firebase Auth: ${t.email}`)}catch(e){console.error("Error deleting user:",e),alert("Ralat memadam pengguna: "+e.message)}}},$=b.filter(e=>(e.name||"").toLowerCase().includes(P.toLowerCase())||(e.email||"").toLowerCase().includes(P.toLowerCase()));return"admin"!==y?(0,t.jsx)(c.default,{children:(0,t.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center p-8",children:[(0,t.jsx)(f,{className:"h-12 w-12 text-red-500 mx-auto mb-4"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Akses Ditolak"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Hanya Admin boleh mengakses halaman ini."})]})})}):(0,t.jsx)(c.default,{children:(0,t.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,t.jsx)(d.default,{}),(0,t.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,t.jsx)(u.User,{className:"h-6 w-6 mr-2 text-indigo-600"}),"Pengurusan Pengguna"]}),(0,t.jsx)("p",{className:"text-gray-500 text-sm mt-1",children:"Urus akses, peranan, dan lokasi pengguna sistem."})]}),(0,t.jsxs)("button",{onClick:()=>R("add"),className:"bg-indigo-600 text-white px-4 py-2 rounded-lg flex items-center hover:bg-indigo-700 shadow-sm transition-colors",children:[(0,t.jsx)(m.Plus,{className:"h-5 w-5 mr-1"})," Tambah Pengguna"]})]}),(0,t.jsx)("div",{className:"bg-white p-4 rounded-lg shadow mb-6",children:(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(h.Search,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-5 w-5"}),(0,t.jsx)("input",{type:"text",placeholder:"Cari nama atau emel...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:ring-indigo-500 focus:border-indigo-500",value:P,onChange:e=>C(e.target.value)})]})}),(0,t.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,t.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,t.jsx)("thead",{className:"bg-gray-50",children:(0,t.jsxs)("tr",{children:[(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Nama / Emel"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Peranan"}),(0,t.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Lokasi Ditugaskan"}),(0,t.jsx)("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tindakan"})]})}),(0,t.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:N?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"4",className:"px-6 py-4 text-center",children:"Loading..."})}):0===$.length?(0,t.jsx)("tr",{children:(0,t.jsx)("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500",children:"Tiada pengguna dijumpai."})}):$.map(e=>(0,t.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,t.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name||"Tanpa Nama"}),(0,t.jsx)("div",{className:"text-sm text-gray-500",children:e.email})]}),(0,t.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,t.jsx)("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${"admin"===e.role?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:"admin"===e.role?"Admin":"Editor"})}),(0,t.jsx)("td",{className:"px-6 py-4",children:(0,t.jsxs)("div",{className:"flex flex-wrap gap-1",children:[(e.assignedLocations||[]).map((e,a)=>(0,t.jsx)("span",{className:"bg-gray-100 text-gray-600 px-2 py-0.5 rounded text-xs border border-gray-200",children:e},a)),(!e.assignedLocations||0===e.assignedLocations.length)&&(0,t.jsx)("span",{className:"text-gray-400 text-xs italic",children:"Tiada Lokasi"})]})}),(0,t.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[(0,t.jsx)("button",{onClick:()=>R("edit",e),className:"text-indigo-600 hover:text-indigo-900 mr-3",title:"Edit",children:(0,t.jsx)(x.Edit2,{className:"h-4 w-4"})}),(0,t.jsx)("button",{onClick:()=>U(e),className:"text-red-600 hover:text-red-900",title:"Padam",children:(0,t.jsx)(p.Trash2,{className:"h-4 w-4"})})]})]},e.id))})]})})]}),M&&(0,t.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-50 flex items-center justify-center p-4",children:(0,t.jsxs)("div",{className:"bg-white rounded-lg max-w-lg w-full p-6",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,t.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"add"===L?"Tambah Pengguna Baru":"Kemaskini Pengguna"}),(0,t.jsx)("button",{onClick:()=>E(!1),children:(0,t.jsx)(g.X,{className:"h-6 w-6 text-gray-400"})})]}),(0,t.jsxs)("form",{onSubmit:D,className:"space-y-4",children:["add"===L&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Emel"}),(0,t.jsx)("input",{type:"email",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-indigo-500 focus:border-indigo-500",value:O.email,onChange:e=>_({...O,email:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Kata Laluan"}),(0,t.jsx)("input",{type:"password",required:!0,minLength:6,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-indigo-500 focus:border-indigo-500",value:O.password,onChange:e=>_({...O,password:e.target.value})}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Minima 6 karakter."})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Penuh"}),(0,t.jsx)("input",{type:"text",required:!0,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-indigo-500 focus:border-indigo-500",value:O.name,onChange:e=>_({...O,name:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Peranan"}),(0,t.jsxs)("select",{className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2 focus:ring-indigo-500 focus:border-indigo-500",value:O.role,onChange:e=>_({...O,role:e.target.value}),children:[(0,t.jsx)("option",{value:"editor",children:"Editor"}),(0,t.jsx)("option",{value:"admin",children:"Admin"})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Admin boleh akses semua data. Editor hanya akses data lokasi yang ditetapkan."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Lokasi Ditugaskan"}),(0,t.jsxs)("div",{className:"bg-gray-50 p-3 rounded-md border border-gray-200 max-h-48 overflow-y-auto grid grid-cols-2 gap-2",children:[v.map(e=>(0,t.jsxs)("label",{className:"flex items-center space-x-2 text-sm",children:[(0,t.jsx)("input",{type:"checkbox",checked:O.assignedLocations?.includes(e),onChange:()=>{_(t=>{let a=t.assignedLocations||[];return a.includes(e)?{...t,assignedLocations:a.filter(t=>t!==e)}:{...t,assignedLocations:[...a,e]}})},className:"rounded text-indigo-600 focus:ring-indigo-500 h-4 w-4"}),(0,t.jsx)("span",{children:e})]},e)),0===v.length&&(0,t.jsx)("p",{className:"text-sm text-gray-500 col-span-2",children:"Tiada lokasi dijumpai. Sila tambah Kelas dahulu."})]})]}),(0,t.jsxs)("div",{className:"pt-4 flex justify-end space-x-3",children:[(0,t.jsx)("button",{type:"button",onClick:()=>E(!1),className:"bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-50",children:"Batal"}),(0,t.jsx)("button",{type:"submit",disabled:N,className:"bg-indigo-600 text-white px-4 py-2 rounded-md hover:bg-indigo-700 flex items-center",children:N?"Processing...":"add"===L?"Cipta Pengguna":"Simpan Perubahan"})]})]})]})})]})})}e.s(["default",()=>y],76765)}]);